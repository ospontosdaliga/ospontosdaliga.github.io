<!DOCTYPE HTML>
<meta charset="utf-8" />
<html>
    <head>
        <link rel="icon" href="https://lh6.googleusercontent.com/qJj_kliyP5PugM6ThrtfNlpsB4Y-CIhcX_uf6zyXWMrFaztAnVry6htW9RF6-ETf-TUz4xTjYieQuqA=w940-h673">
        <link href="../css/main.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'>
        <script src="../js/jquery.min.js" type="application/javascript"></script>
        <script src="../js/main.js" type="application/javascript"></script>
        <script src="../js/tracker.js" type="application/javascript"></script>
        <script>
            setStartPage(3);
        </script>
    </head>
    <body onload="runAfterPageLoad();" class="background-image-1617">
        <div id="header" class="background-image-dark-1617">
            <div class="centerPage headerLine">
                <div id="title">
                    <span>Os Pontos da Liga</span>
                    <select id="leagueSelect" onchange="setLeague();">
                      <option value="1516">2015 / 2016</option>
                      <option value="1617" selected>2016 / 2017</option>
                    </select>
                </div>
                <div id="userInfo"></div>
            </div>
            <div id="headerNav" class="centerPage headerLine">
                <div id="b1" class="hButton" onclick="setPageTo(1);">Notícias</div>
                <div id="b2" class="hButton" onclick="setPageTo(2);">Jogadores</div>
                <div id="b3" class="hButton hSelected" onclick="setPageTo(3);">Treinadores</div>
                <div id="b4" class="hButton" onclick="setPageTo(4);">Calendário</div>
                <div id="b5" class="hButton" onclick="setPageTo(5);">Classificação</div>
			<img id="MenuButton" class="dropbtn" onclick="$('#fbButton,#fbMenu').removeClass('showMenu');$('#MenuButton,#Menu').toggleClass('showMenu');"  />
                <div id="fbButton" class="dropbtn" onclick="$('#MenuButton, #Menu').removeClass('showMenu');$('#fbButton,#fbMenu').toggleClass('showMenu');">
                    <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M15.117 0H.883C.395 0 0 .395 0 .883v14.234c0 .488.395.883.883.883h7.663V9.804H6.46V7.39h2.086V5.607c0-2.066 1.262-3.19 3.106-3.19.883 0 1.642.064 1.863.094v2.16h-1.28c-1 0-1.195.476-1.195 1.176v1.54h2.39l-.31 2.416h-2.08V16h4.077c.488 0 .883-.395.883-.883V.883C16 .395 15.605 0 15.117 0" fill-rule="nonzero"></path></svg>
                </div>
            </div>
        </div>

        <div id="dropdownMenu" class="centerPage">
            <div id="DropdownContainer">
                <div id="fbMenu">
                    <div class='dropdown-content'>
                        
                    </div>
                </div>
                <div id="Menu">
                </div>
            </div>
        </div>
        <div id="page" class="centerPage">
            <table id="coaches" class="GenericTable box1of1">
                <thead class="sortBar">
                    <tr>
                        <th>
                            <button class="sort" data-sort="name">
                                Treinador
                            </button>
                        </th>
                        <th>
                            <button class="sort" data-sort="team">
                                Equipa
                            </button>
                        </th>
                        <th colspan="3">
                            Pontos
                        </th>
                    </tr>
                    <tr class="accent">
                        <th colspan="2" class="border"></th>
                        <th class="smallColumn">
                            <button class="sort" data-sort="roundPoints">
                                Ronda
                            </button>
                        </th>
                        <th class="smallColumn">
                            <button class="sort" data-sort="averagePointsPerRound">
                                Média
                            </button>
                        </th>
                        <th class="smallColumn">
                            <button class="sort" data-sort="totalPoints">
                                Total
                            </button>
                        </th>
                    </tr>
                </thead>
                <tbody class="list">
                </tbody>
            </table>
            
            <div id="coachdetails" class="boxContainer box1of1" style="display: none;">
                <div class="boxHeader">
                    Detalhes do Treinador
                </div>
                <div class="boxContentFrame">
                    <div class="boxContent scrollable">
                        <table style="width: 100%">
                            <tbody>
                                <tr>
                                    <td colspan="4" style="text-align: center;">
                                        Treinador a comparar
                                    </td>
                                    <td>
                                    </td>
                                    <td colspan="3" style="text-align: center;">
                                        Tipo de gráfico
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width:15%; text-align: center;">
                                        <input type="radio" id="coach1" name="player" checked="true"/>
                                        <label for="coach1">Treinador 1</label>
                                    </td>
                                    <td style="width:15%; text-align: center;">
                                        <input type="radio" id="coach2" name="player"/>
                                        <label for="coach2">Treinador 2</label>
                                    </td>
                                    <td style="width:15%; text-align: center;">
                                        <input type="radio" id="coach3" name="player"/>
                                        <label for="coach3">Treinador 3</label>
                                    </td>
                                    <td style="width:15%; text-align: center;">
                                        <input type="radio" id="coach4" name="player"/>
                                        <label for="coach4">Treinador 4</label>
                                    </td>
                                    <td style="width:16%">
                                    </td>
                                    <td style="text-align: center;">
                                        <button id="graph1" class="mButton" onclick="javascript:selectedChartType = 0;loadChart();">Pts</button>
                                    </td>
                                    <td style="text-align: center;">
                                        <button id="graph2" class="mButton" onclick="javascript:selectedChartType = 1;loadChart();">&#8721;</button>
                                    </td>
                                    <td style="text-align: center;">
                                        <button id="graph3" class="mButton" onclick="javascript:selectedChartType = 2;loadChart();">x&#772;</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <canvas id="canvas1" height="200" width="800px"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

<script src="../js/dataaccess.js"></script>
<script src="../js/20162017/cinfo.js"></script>
<script>
    // Load Coaches
    
    getCoachIds().forEach(addCoachToList);
    
    function addCoachToList(item, index) {
        $(".list").append("<tr class='SelectableRow' onclick='getPaging(this.id)' id='"+ item +"'>" +
          "<td class='name normalColumn'>" + getCoachInfo(item)["name"] +" </td>" +
          "<td class='team normalColumn'>" + getCoachInfo(item)["team"] + "</td>" +
          "<td class='roundPoints smallColumn standOutCell'>" + getCoachInfo(item)["roundPoints"] + "</td>" +
          "<td class='averagePointsPerRound smallColumn'>" + getCoachInfo(item)["averagePointsPerRound"] + "</td>" +
          "<td class='totalPoints smallColumn'>" + getCoachInfo(item)["totalPoints"] + "</td>" +
            "</tr>");
    }
</script>
<script src="../js/list.js"></script>
<script>
    var options = {
      valueNames: [ 'name', 'team', 'roundPoints', 'averagePointsPerRound', 'totalPoints' ]
    };

    var userList = new List('page', options);
    userList.sort('roundPoints', { order: "desc" });
</script>

<script src="../js/chart.min.js"></script>
<script src="../js/20162017/cpoints.js"></script>
<script src="../js/20162017/ocpoints.js"></script>
<script src="../js/20162017/acpoints.js"></script>
<script>
    var slots = [0,0,0,0];
    var slotColors = ['255,255,255'
                      ,'255,0,0'
                      ,'0,255,0'
                      ,'85,85,255'];
    
    var selectedChartType = 0;
    
    function getCoachColor(slotId)
    {
        return slotColors[slotId];
    }
    
    function chooseCoach(coachId)
    {
        var c1 = document.getElementById('coach1');
        var c2 = document.getElementById('coach2');
        var c3 = document.getElementById('coach3');
        var c4 = document.getElementById('coach4');
        
       if ((c1.checked == true)) {
            slots[0] = coachId;
            return false;
        }
        else if ((c2.checked == true)) {
            slots[1] = coachId;
            return false;
        }
        else if ((c3.checked == true)) {
            slots[2] = coachId;
            return false;
        }
        else if ((c4.checked == true)) {
            slots[3] = coachId;
            return false;
        }   
    }
        
    var myLineChart1;
    
    function getCoachData(slotId) {
        if(selectedChartType == 0)
        {
            return getCoachPoints(slotId);
        }
        else if(selectedChartType == 1)
        {
            return getOverallCoachPoints(slotId);
        }
        else if(selectedChartType == 2)
        {
            return getAverageCoachPoints(slotId);
        }
    }

    function loadChart(){
        var index;
        var dataset = [];
        
        for (index = 0; index < slots.length; ++index) {
            if(slots[index] > 0)
            {
                dataset.push({
                    label: getCoachInfo(slots[index])["name"] + " (" + getCoachInfo(slots[index])["team"] + ")",
                    backgroundColor: "rgba(" + getCoachColor(index) + ",0.01)",
                    borderColor: "rgba(" + getCoachColor(index) + ",1)",
                    borderWidth: 1,
                    data : getCoachData(slots[index])
                });
            }
        }
        
        var chartData = {
            labels : getLabels20162017(),
            datasets : dataset,
        }
    
        drawChart(chartData);
	}
</script>

<script>
function drawChart(chartData) {
    if(myLineChart1 != null) { myLineChart1.destroy(); }
    
    var ctx = document.getElementById("canvas1").getContext("2d");
    myLineChart1 = new Chart(ctx, {
        type: 'line',
        data: chartData,
        options: {
            title: {
                display: true,
                fontColor: "rgba(247,247,247,1)",
                fontFamily: "'Titillium Web', 'sans-serif'",
                fontStyle: "normal",
                text: 'Pontos por Ronda'
            },
            legend: {
                display: true,
                labels: {
                    fontColor: "rgba(180,180,180,1)",
                    fontFamily: "'Titillium Web', 'sans-serif'"
                }
            }
        }
    });
}
    
function getPaging(str) {
    $("#coachdetails").show();
    
    chooseCoach(str);
    
    loadChart();
}
</script>